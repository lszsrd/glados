FUNC main 0
PUSH_INT 5
PUSH_INT 100
CALL rand 2
STORE x
PUSH_CHAR 'L'
PUSH_CHAR 'I'
PUSH_CHAR 'C'
PUSH_CHAR 'E'
PUSH_CHAR 'N'
PUSH_CHAR 'S'
PUSH_CHAR 'E'
PUSH_CHAR '.'
PUSH_CHAR 'm'
PUSH_CHAR 'd'
PUSH_LIST 10
STORE path
CALL dumpFile 1
PUSH_INT 1
PUSH_CHAR 'f'
PUSH_CHAR 'a'
PUSH_CHAR 'c'
PUSH_CHAR 't'
PUSH_CHAR 'o'
PUSH_CHAR 'r'
PUSH_CHAR 'i'
PUSH_CHAR 'a'
PUSH_CHAR 'l'
PUSH_CHAR '('
PUSH_LIST 10
LOAD x
ADD
PUSH_CHAR ')'
PUSH_CHAR ' '
PUSH_CHAR '='
PUSH_CHAR ' '
PUSH_LIST 4
LOAD x
STORE x
CALL factorial 1
ADD
ADD
CALL println 2
PUSH_INT 0
RET
ENDFUNC
FUNC dumpFile 1
PUSH_INT 1
PUSH_CHAR 'a'
PUSH_CHAR 'z'
CALL rand 2
CALL println 2
LOAD path
CALL open_r 1
STORE fd
LOAD fd
CALL isOpen 1
PUSH_BOOL False
EQ
JMP_IF_FALSE endif
PUSH_INT 1
CALL exit 1
LABEL endif
LABEL while_start
LOAD fd
CALL isEOF 1
PUSH_BOOL False
EQ
JMP_IF_FALSE while_end
PUSH_INT 1
LOAD fd
CALL readln 1
CALL println 2
JMP while_start
LABEL while_end
LOAD fd
PUSH_INT 0
LOAD fd
CALL tell 1
SUB
CALL seek_e 2
LOAD fd
CALL close 1
PUSH_CHAR '/'
PUSH_CHAR 'd'
PUSH_CHAR 'e'
PUSH_CHAR 'v'
PUSH_CHAR '/'
PUSH_CHAR 'u'
PUSH_CHAR 'r'
PUSH_CHAR 'a'
PUSH_CHAR 'n'
PUSH_CHAR 'd'
PUSH_CHAR 'o'
PUSH_CHAR 'm'
PUSH_LIST 12
CALL open_r 1
STORE fd2
PUSH_INT 0
STORE i
LABEL for_start
LOAD i
PUSH_INT 5
LT
JMP_IF_FALSE for_end
PUSH_INT 1
LOAD fd2
CALL readln 1
CALL println 2
LOAD i
PUSH_INT 1
ADD
STORE i
JMP for_start
LABEL for_end
LOAD fd2
CALL close 1
ENDFUNC
FUNC factorial 1
LOAD x
PUSH_INT 1
EQ
JMP_IF_FALSE endif
PUSH_INT 1
RET
LABEL endif
LOAD x
LOAD x
PUSH_INT 1
SUB
STORE x
CALL factorial 1
MUL
RET
ENDFUNC
